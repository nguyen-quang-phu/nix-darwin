"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{32238:(e,a,s)=>{s.r(a),s.d(a,{default:()=>sa});var i=s(30758),t=s(41978),r=s(33165),l=s(58184),n=s(33666),o=s(11137),c=s(17635),u=s(74801),d=s(8539),m=s(63296),g=s(11207),h=s(91446),x=s(95477),b=s(2052),p=s(9818),y=s(63259),j=s(63915),f=s(86070);const k=({message:e,spec:a,logger:s,className:i})=>{const{onUpgradeClick:t,type:r}=(0,j.i)(a,s);return(0,y.V)()?null:(0,f.jsx)(g.v,{id:"catalogue-restricted-banner",className:i,variant:"tinted",leading:(0,f.jsx)(h.N,{}),title:e,trailing:(0,f.jsx)(x.$,{size:"small",onClick:t,iconOnly:"external"===r?b.H:p.h,"aria-label":d.Ru.get("upgrade.tooltip.title"),title:d.Ru.get("upgrade.tooltip.title")})})};var C=s(58295),v=s(87349),w=s(16493),A=s(82342),R=s(18520),M=s(51414),N=s(66932),U=s(64741),P=s(79851),L=s(7138),S=s(50629),I=s(74460),B=s(57528),F=s(83834),D=s(42931),z=s(83875),T=s(10139),_=s(93655),O=s(42551),V=s(10539),E=s(45782),J=s(93239),K=s(48045),W=s(30023),$=s(4414),q=s(79278),H=s(44690),X=s(44671),Z=s(68262),G=s(90577),Y=s(23572),Q=s(1900),ee=s(55937),ae=s(63994),se=s(10644),ie=s(2262);const te="m2grVeuHNwfGLVpaSBle",re="GLKjAw6oM_egXztVxKKB",le="MGZ4oJmGVPrWsx5cT5hN",ne="DmrVJc9vWCbjU_DuRvfe",oe="yLmA5f7x65en2MdKbIhX",ce="F5J4ctyBbgSfS6qkFH5c",ue=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:t,spec:r,logger:l,backgroundColor:n,name:o,artists:c,isPlayable:u,sharingInfo:m}){const g=(0,Z.W)(),h=(0,G.n)(),x=(0,ee.t)(),b=(0,i.useMemo)((()=>r.actionBarFactory()),[r]),[p,y]=(0,ae.A)(e),j=(0,i.useCallback)((()=>{const i=(0,Y.$I)({isPlaying:s,isActive:t,spec:b.playButtonFactory(),logger:l,uri:e});a({loggingParams:i})}),[s,t,a,b,l,e]),k=(0,i.useCallback)((async()=>{let a;const s=b.saveButtonFactory();a=p?s.hitDislike({itemToBeDisliked:e}):s.hitLike({itemToBeLiked:e}),l.logInteraction(a),g({targetUri:e,intent:p?"unsave":"save",type:"click"});try{await y(!p)}catch{}}),[g,e,p,y,b,l]),C=(0,H.X)(),v=(0,X.j)();return(0,f.jsx)(T.E,{backgroundColor:n,children:(0,f.jsxs)(_.S,{children:[(0,f.jsx)(F.D,{onClick:j,disabled:!u,isPlaying:s,size:v,uri:e}),C&&(0,f.jsx)(se.r,{spec:b,children:(0,f.jsx)(q.Y,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:v})}),(0,f.jsx)(K.h,{uri:e,action:Q.no.SAVE_ALBUM,children:(0,f.jsx)(O.M,{isAdded:!!p,onClick:k,disabled:!h&&!x?.getCapabilities().canModifyOffline,size:v,condensed:!0})}),(0,f.jsx)(V.f,{uri:e,isFollowing:!!p,onClick:(a,s)=>(0,Y.Qv)(s,b.downloadButtonFactory(),l,e),onFollow:k,size:v,condensed:!0}),(0,f.jsx)(J.b,{onShow:()=>(0,Y.R2)(b,l),menu:(0,f.jsx)(w.h,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:m}),children:(0,f.jsx)(E.e,{label:d.Ru.get("more.label.context",o),size:v})}),(0,f.jsx)("div",{className:oe,children:(0,f.jsx)(W.u,{property:ie.mA,renderNewExperience:()=>(0,f.jsx)($.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var de=s(3300),me=s(96839),ge=s(25931),he=s(86461);const xe=({releases:e})=>(0,f.jsx)(ge.W,{children:e.map((e=>(0,f.jsx)(he.D,{role:"menuitem",to:(0,me.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)))}),be=864e5,pe=365.25*be;var ye=s(58076),je=s(42495),fe=s(9168),ke=s(78610),Ce=s(73005),ve=s(16743),we=s(67939),Ae=s(59943);const Re="bhvAemcPYUmxOdBe1mVi",Me="hmgHdasWrZaA9tiXVw_u",Ne="RmbxUFLb4j9KmgftJyk1",Ue="boNCdFnbh9y0PBweIDUt",Pe="LfQtKa295FPgk8VuZRfD",Le="Oytey9nANMtSDKSmZpJ6",Se=i.memo((function(e){const{images:a,title:s,isOpen:t,onClose:r}=e,l=(0,i.useMemo)((()=>(0,Ae.g)(a,{desiredSize:1e4})),[a]);return l?(0,f.jsx)(ve.A,{className:Re,isOpen:t,onRequestClose:r,animation:{modal:{base:Ue,afterOpen:Pe,beforeClose:Le}},animated:!0,children:(0,f.jsxs)("div",{style:{"--image-width":`${l.width}px`,"--image-height":`${l.height}px`},className:Me,children:[(0,f.jsx)(we._,{loading:"eager",alt:s,src:l.url,className:Ne}),(0,f.jsx)(Ce.H,{onClick:r,semanticColor:"textBase",children:d.Ru.get("web-player.cover-art-modal.close")})]})}):null}));var Ie=s(22105),Be=s(70305),Fe=s(67281),De=s(42344);const ze=new Fe.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var Te=s(82571);const _e=({albumName:e,albumURI:a})=>{const{data:s}=(i={uri:a},t={gcTime:5*De.i},(0,De.I)(ze,i,t));var i,t;const r=s?.albumUnion&&"merch"in s.albumUnion?s?.albumUnion?.merch?.items:[];return r&&r?.length>0?(0,f.jsx)("div",{className:"contentSpacing",children:(0,f.jsx)("div",{className:Te.A.albumMerch,children:(0,f.jsx)(Be.q,{id:e,uri:a,merchItems:r,merchVariant:"Album page merch items"})})}):null};var Oe=s(85848),Ve=s(23989),Ee=s(56501),Je=s(96331),Ke=s(46600),We=s(68688),$e=s(5125),qe=s(76180),He=s(544),Xe=s(60093),Ze=s(82837),Ge=s(58400),Ye=s(50826);const Qe=i.lazy((()=>s.e(935).then(s.bind(s,50935))));function ea(e){switch(e){case fe._.Single:return d.Ru.get("single");case fe._.Ep:return d.Ru.get("ep");case fe._.Compilation:return d.Ru.get("compilation");case fe._.Audiobook:return d.Ru.get("card.tag.audiobook");case fe._.Album:default:return d.Ru.get("album")}}const aa=({uri:e,album:a})=>{const s=(0,r.zy)(),{spec:g,logger:h,UBIFragment:x}=(0,Ge.r)(u.E,{data:{uri:e}}),b=(0,i.useMemo)((()=>g.trackListFactory()),[g]),p=(0,i.useMemo)((()=>g.moreByArtistShelfFactory()),[g]),y=(0,i.useMemo)((()=>g.upgradeButtonFactory()),[g]),j=a.moreAlbumsByArtist,B=parseInt(new URLSearchParams((0,r.zy)().search).get("index")||"0",10),T=(0,Ee.J)(e),{usePlayContextItem:_,togglePlay:O,isPlaying:V,isActive:E}=(0,Xe.P)({uri:T},{featureIdentifier:"album"}),J=(0,i.useCallback)(((e,a)=>{if(g){const e=g.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});h.logInteraction(e)}}),[h,g]),{isOpen:K,openModal:W,closeModal:$}=(()=>{const[e,a]=(0,i.useState)(!1);return{isOpen:e,openModal:(0,i.useCallback)((()=>a(!0)),[]),closeModal:(0,i.useCallback)((()=>a(!1)),[])}})(),q=(0,c.NC)(Ke.WJ1,{loadingValue:!1})?{onClick:W,ariaLabel:d.Ru.get("web-player.album.open_coverart_modal")}:{},H=(0,i.useCallback)((()=>new URLSearchParams(s.search.slice(1)).get("highlight")||""),[s.search]),X=a.uri,Z=a.name,G=a.albumType,Y=a.release?.date,Q=a.release?.precision,ee=a.nrTracks,ae=a.images,se=a.extractedColors?.colorRaw.hex,ie=a.artists,oe=a.isPlayable,me=a.isCatalogueRestricted,ge=a.copyright.items,he=a.courtesyLine,ye=a.duration.durationMs,fe=a.duration.isEstimate,Ce=H(),ve=(0,t.d4)(We.Ht),we=ve.overrides?.locale??d.Ru.getLocaleForTranslation(),Ae=(0,Ve.W)({uri:e,type:"locale"}),Re=(0,Ze.qc)({albumName:Z,albumType:G,albumArtists:ie.map((e=>e.name)).join(d.Ru.getSeparator()),shouldLocalize:Ae,i18n:d.Ru});(0,Je.z)(se||null);const Me=function(e){return(0,i.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),s=(new Date).getTime()-a.getTime(),i=s%pe;return i<3.5*be||i>312552e5?Math.round(s/pe):null}return null}),[e])}(a.release),{isCompactMode:Ne}=(0,Oe.a)(),Ue=(0,je.t)(),Pe=(0,f.jsx)(w.h,{uri:a.uri,artistUri:a.artists?.[0]?.uri,sharingInfo:a.sharingInfo});return(0,f.jsxs)("section",{className:te,"data-testid":"album-page",children:[(0,f.jsx)(A.Q,{children:Re}),!Ce&&(0,f.jsx)(Ie.c,{artistOrShow:ie.map((e=>e.name)).join(d.Ru.getSeparator()),title:Z,uri:e,entityType:Ie.p.ALBUM}),null!==Me?(0,f.jsx)(i.Suspense,{fallback:null,children:(0,f.jsx)(Qe,{colorLight:a.extractedColors?.colorLight.hex,colorDark:a.extractedColors?.colorDark.hex,name:Z,years:Me})}):null,(0,f.jsxs)(R.z,{backgroundColor:se,children:[(0,f.jsxs)(U.h,{children:[(0,f.jsx)(F.D,{size:"medium",onClick:()=>O(),disabled:!oe,isPlaying:V,uri:e}),(0,f.jsx)(v.h,{menu:Pe,children:(0,f.jsx)(P.X,{text:Z,dragUri:e,dragLabel:Z})})]}),(0,f.jsx)(v.h,{menu:Pe,children:(0,f.jsx)(M.K,{dragUri:X,images:ae,name:Z,placeholderType:"album",...q})}),(0,f.jsxs)(N.Y,{children:[(0,f.jsx)(S.B,{children:ea(G)}),(0,f.jsx)(v.h,{menu:Pe,children:(0,f.jsx)(I.mm,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:I.tw,children:Z})}),(0,f.jsx)(L.t,{creators:ie,onCreatorClick:J,releaseDate:Y,releaseDatePrecision:Q,totalItems:ee,durationMilliseconds:ye,isEstimatedDuration:fe,hasTracks:!0})]})]}),(0,f.jsx)(ue,{backgroundColor:se,uri:e,togglePlay:O,isPlaying:V,isActive:E,spec:g,logger:h,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),(0,f.jsxs)("div",{className:"contentSpacing",children:[me&&(0,f.jsx)(k,{message:(0,ke.E)(G),className:ce,spec:y,logger:h}),(0,f.jsx)(x,{spec:b,children:(0,f.jsx)(z.a,{columns:Ue,children:(0,f.jsx)(de.F,{ariaLabel:Z,nrTracks:(0,ke.YD)(a.discs)?a.discs.totalCount+ee:ee,discs:a.discs,albumUri:X,highlightUri:Ce,scrollToIndex:B,usePlayContextItem:_,initalTracks:a.items,isCompactMode:Ne})})}),(0,f.jsxs)("div",{className:ne,children:[(0,f.jsxs)("div",{children:[Y&&(0,f.jsx)(l.E,{as:"p",variant:"bodySmall",children:(0,Ye.rh)((0,Ye.ad)(Y),we,{year:"numeric",month:"long",day:"numeric"},Q)}),(0,f.jsx)($e.Z,{copyrights:ge,courtesyLine:he})]}),a.releases.items.length>0&&(0,f.jsx)(C.t,{menu:(0,f.jsx)(xe,{releases:a.releases.items}),children:(e,s,i)=>(0,f.jsxs)("button",{ref:i,className:le,type:"button",onClick:s,children:[(0,f.jsx)(l.E,{variant:"bodySmall",children:d.Ru.get("album-page.more-releases",a.releases.items.length)}),e?(0,f.jsx)(n.J,{size:"small"}):(0,f.jsx)(o.y,{size:"small"})]})})]})]}),(0,f.jsx)(_e,{albumName:Z,albumURI:X}),(0,f.jsx)(f.Fragment,{children:j?.length>0&&(0,f.jsx)("div",{className:"contentSpacing",children:(0,f.jsx)(x,{spec:p,children:(0,f.jsx)(D.p,{index:0,id:"more-albums",className:re,title:d.Ru.get("album-page.more-by-artist",ie?.[0]?.name),total:j.length,seeAllUri:`${ie?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:d.Ru.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:j.map(((e,a)=>(0,f.jsx)(m.R,{index:a,artists:ie,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})})}),(0,f.jsx)(Se,{title:Re,isOpen:K,onClose:$,images:ae})]})},sa=i.memo((function(){const{albumId:e}=(0,r.g)(),a=`spotify:album:${e}`,{loading:s,error:i,data:t,canLoadOffline:l}=(0,ye.$)(a);return s||!t?(0,f.jsx)(B.A,{hasError:null!==i,loadOffline:l,errorMessage:d.Ru.get("error.not_found.title.album")}):(0,f.jsx)(He.P,{surface:qe.u.ALBUM,uris:[a],children:(0,f.jsx)(aa,{uri:a,album:t})})}))}}]);
//# sourceMappingURL=xpui-routes-album.js.map