"use strict";var Ar=Object.create;var Z=Object.defineProperty;var Tr=Object.getOwnPropertyDescriptor;var Cr=Object.getOwnPropertyNames;var Or=Object.getPrototypeOf,Gr=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Rr=(e,t)=>{for(var r in t)Z(e,r,{get:t[r],enumerable:!0})},nt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Cr(t))!Gr.call(e,o)&&o!==r&&Z(e,o,{get:()=>t[o],enumerable:!(n=Tr(t,o))||n.enumerable});return e};var b=(e,t,r)=>(r=e!=null?Ar(Or(e)):{},nt(t||!e||!e.__esModule?Z(r,"default",{value:e,enumerable:!0}):r,e)),Dr=e=>nt(Z({},"__esModule",{value:!0}),e);var at=p((ls,st)=>{st.exports=it;it.sync=Nr;var rt=require("fs");function kr(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function ot(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:kr(t,r)}function it(e,t,r){rt.stat(e,function(n,o){r(n,n?!1:ot(o,e,t))})}function Nr(e,t){return ot(rt.statSync(e),e,t)}});var pt=p((ps,lt)=>{lt.exports=ut;ut.sync=$r;var ct=require("fs");function ut(e,t,r){ct.stat(e,function(n,o){r(n,n?!1:dt(o,t))})}function $r(e,t){return dt(ct.statSync(e),t)}function dt(e,t){return e.isFile()&&Lr(e,t)}function Lr(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),d=parseInt("001",8),f=a|c,x=r&d||r&c&&o===s||r&a&&n===i||r&f&&i===0;return x}});var mt=p((ms,ft)=>{var fs=require("fs"),J;process.platform==="win32"||global.TESTING_WINDOWS?J=at():J=pt();ft.exports=ye;ye.sync=jr;function ye(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){ye(e,t||{},function(i,s){i?o(i):n(s)})})}J(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function jr(e,t){try{return J.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var wt=p((gs,bt)=>{var R=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",gt=require("path"),Br=R?";":":",ht=mt(),St=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),yt=(e,t)=>{let r=t.colon||Br,n=e.match(/\//)||R&&e.match(/\\/)?[""]:[...R?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=R?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=R?o.split(r):[""];return R&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},xt=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=yt(e,t),s=[],a=d=>new Promise((f,x)=>{if(d===n.length)return t.all&&s.length?f(s):x(St(e));let g=n[d],h=/^".*"$/.test(g)?g.slice(1,-1):g,l=gt.join(h,e),S=!h&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;f(c(S,d,0))}),c=(d,f,x)=>new Promise((g,h)=>{if(x===o.length)return g(a(f+1));let l=o[x];ht(d+l,{pathExt:i},(S,w)=>{if(!S&&w)if(t.all)s.push(d+l);else return g(d+l);return g(c(d,f,x+1))})});return r?a(0).then(d=>r(null,d),r):a(0)},Fr=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=yt(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,d=gt.join(c,e),f=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let x=0;x<n.length;x++){let g=f+n[x];try{if(ht.sync(g,{pathExt:o}))if(t.all)i.push(g);else return g}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw St(e)};bt.exports=xt;xt.sync=Fr});var be=p((hs,xe)=>{"use strict";var vt=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};xe.exports=vt;xe.exports.default=vt});var At=p((Ss,Et)=>{"use strict";var It=require("path"),qr=wt(),Ur=be();function Pt(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=qr.sync(e.command,{path:r[Ur({env:r})],pathExt:t?It.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=It.resolve(o?e.options.cwd:"",s)),s}function Mr(e){return Pt(e)||Pt(e,!0)}Et.exports=Mr});var Tt=p((ys,ve)=>{"use strict";var we=/([()\][%!^"`<>&|;, *?])/g;function _r(e){return e=e.replace(we,"^$1"),e}function Hr(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(we,"^$1"),t&&(e=e.replace(we,"^$1")),e}ve.exports.command=_r;ve.exports.argument=Hr});var Ot=p((xs,Ct)=>{"use strict";Ct.exports=/^#!(.*)/});var Rt=p((bs,Gt)=>{"use strict";var Kr=Ot();Gt.exports=(e="")=>{let t=e.match(Kr);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var kt=p((ws,Dt)=>{"use strict";var Ie=require("fs"),Xr=Rt();function Wr(e){let r=Buffer.alloc(150),n;try{n=Ie.openSync(e,"r"),Ie.readSync(n,r,0,150,0),Ie.closeSync(n)}catch{}return Xr(r.toString())}Dt.exports=Wr});var jt=p((vs,Lt)=>{"use strict";var Vr=require("path"),Nt=At(),$t=Tt(),zr=kt(),Qr=process.platform==="win32",Yr=/\.(?:com|exe)$/i,Zr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Jr(e){e.file=Nt(e);let t=e.file&&zr(e.file);return t?(e.args.unshift(e.file),e.command=t,Nt(e)):e.file}function eo(e){if(!Qr)return e;let t=Jr(e),r=!Yr.test(t);if(e.options.forceShell||r){let n=Zr.test(t);e.command=Vr.normalize(e.command),e.command=$t.command(e.command),e.args=e.args.map(i=>$t.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function to(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:eo(n)}Lt.exports=to});var qt=p((Is,Ft)=>{"use strict";var Pe=process.platform==="win32";function Ee(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function no(e,t){if(!Pe)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=Bt(o,t,"spawn");if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function Bt(e,t){return Pe&&e===1&&!t.file?Ee(t.original,"spawn"):null}function ro(e,t){return Pe&&e===1&&!t.file?Ee(t.original,"spawnSync"):null}Ft.exports={hookChildProcess:no,verifyENOENT:Bt,verifyENOENTSync:ro,notFoundError:Ee}});var Ce=p((Ps,D)=>{"use strict";var Ut=require("child_process"),Ae=jt(),Te=qt();function Mt(e,t,r){let n=Ae(e,t,r),o=Ut.spawn(n.command,n.args,n.options);return Te.hookChildProcess(o,n),o}function oo(e,t,r){let n=Ae(e,t,r),o=Ut.spawnSync(n.command,n.args,n.options);return o.error=o.error||Te.verifyENOENTSync(o.status,n),o}D.exports=Mt;D.exports.spawn=Mt;D.exports.sync=oo;D.exports._parse=Ae;D.exports._enoent=Te});var en=p((Hs,re)=>{re.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&re.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&re.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Le=p((Ks,L)=>{var m=global.process,C=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};C(m)?(tn=require("assert"),N=en(),nn=/^win/i.test(m.platform),X=require("events"),typeof X!="function"&&(X=X.EventEmitter),m.__signal_exit_emitter__?y=m.__signal_exit_emitter__:(y=m.__signal_exit_emitter__=new X,y.count=0,y.emitted={}),y.infinite||(y.setMaxListeners(1/0),y.infinite=!0),L.exports=function(e,t){if(!C(global.process))return function(){};tn.equal(typeof e,"function","a callback must be provided for exit handler"),$===!1&&Ne();var r="exit";t&&t.alwaysLast&&(r="afterexit");var n=function(){y.removeListener(r,e),y.listeners("exit").length===0&&y.listeners("afterexit").length===0&&oe()};return y.on(r,e),n},oe=function(){!$||!C(global.process)||($=!1,N.forEach(function(t){try{m.removeListener(t,ie[t])}catch{}}),m.emit=se,m.reallyExit=$e,y.count-=1)},L.exports.unload=oe,O=function(t,r,n){y.emitted[t]||(y.emitted[t]=!0,y.emit(t,r,n))},ie={},N.forEach(function(e){ie[e]=function(){if(C(global.process)){var r=m.listeners(e);r.length===y.count&&(oe(),O("exit",null,e),O("afterexit",null,e),nn&&e==="SIGHUP"&&(e="SIGINT"),m.kill(m.pid,e))}}}),L.exports.signals=function(){return N},$=!1,Ne=function(){$||!C(global.process)||($=!0,y.count+=1,N=N.filter(function(t){try{return m.on(t,ie[t]),!0}catch{return!1}}),m.emit=on,m.reallyExit=rn)},L.exports.load=Ne,$e=m.reallyExit,rn=function(t){C(global.process)&&(m.exitCode=t||0,O("exit",m.exitCode,null),O("afterexit",m.exitCode,null),$e.call(m,m.exitCode))},se=m.emit,on=function(t,r){if(t==="exit"&&C(global.process)){r!==void 0&&(m.exitCode=r);var n=se.apply(this,arguments);return O("exit",m.exitCode,null),O("afterexit",m.exitCode,null),n}else return se.apply(this,arguments)}):L.exports=function(){return function(){}};var tn,N,nn,X,y,oe,O,ie,$,Ne,$e,rn,se,on});var gn=p((Vs,mn)=>{"use strict";var{PassThrough:Oo}=require("stream");mn.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,n=r==="buffer",o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);let i=new Oo({objectMode:o});r&&i.setEncoding(r);let s=0,a=[];return i.on("data",c=>{a.push(c),o?s=a.length:s+=c.length}),i.getBufferedValue=()=>t?a:n?Buffer.concat(a,s):a.join(""),i.getBufferedLength=()=>s,i}});var Be=p((zs,W)=>{"use strict";var{constants:Go}=require("buffer"),Ro=require("stream"),{promisify:Do}=require("util"),ko=gn(),No=Do(Ro.pipeline),ae=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function je(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,n=ko(t);return await new Promise((o,i)=>{let s=a=>{a&&n.getBufferedLength()<=Go.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};(async()=>{try{await No(e,n),o()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new ae)})}),n.getBufferedValue()}W.exports=je;W.exports.buffer=(e,t)=>je(e,{...t,encoding:"buffer"});W.exports.array=(e,t)=>je(e,{...t,array:!0});W.exports.MaxBufferError=ae});var Fe=p((Qs,hn)=>{"use strict";var{PassThrough:$o}=require("stream");hn.exports=function(){var e=[],t=new $o({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(i){return Array.isArray(i)?(i.forEach(r),this):(e.push(i),i.once("end",o.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function n(){return e.length==0}function o(i){e=e.filter(function(s){return s!==i}),!e.length&&t.readable&&t.end()}}});var Ln=p((ha,$n)=>{"use strict";$n.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),r=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}});var Fn=p((Sa,Q)=>{"use strict";var z=require("path"),jn=be(),Bn=e=>{e={cwd:process.cwd(),path:process.env[jn()],execPath:process.execPath,...e};let t,r=z.resolve(e.cwd),n=[];for(;t!==r;)n.push(z.join(r,"node_modules/.bin")),t=r,r=z.resolve(r,"..");let o=z.resolve(e.cwd,e.execPath,"..");return n.push(o),n.concat(e.path).join(z.delimiter)};Q.exports=Bn;Q.exports.default=Bn;Q.exports.env=e=>{e={env:process.env,...e};let t={...e.env},r=jn({env:t});return e.path=t[r],t[r]=Q.exports(e),t}});var Un=p((ya,Qe)=>{"use strict";var qn=(e,t)=>{for(let r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};Qe.exports=qn;Qe.exports.default=qn});var _n=p((xa,le)=>{"use strict";var Ko=Un(),de=new WeakMap,Mn=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,o=e.displayName||e.name||"<anonymous>",i=function(...s){if(de.set(i,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return Ko(i,e),de.set(i,n),i};le.exports=Mn;le.exports.default=Mn;le.exports.callCount=e=>{if(!de.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return de.get(e)}});var Hn=p(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.SIGNALS=void 0;var Xo=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];pe.SIGNALS=Xo});var Ye=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.SIGRTMAX=j.getRealtimeSignals=void 0;var Wo=function(){let e=Xn-Kn+1;return Array.from({length:e},Vo)};j.getRealtimeSignals=Wo;var Vo=function(e,t){return{name:`SIGRT${t+1}`,number:Kn+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Kn=34,Xn=64;j.SIGRTMAX=Xn});var Wn=p(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.getSignals=void 0;var zo=require("os"),Qo=Hn(),Yo=Ye(),Zo=function(){let e=(0,Yo.getRealtimeSignals)();return[...Qo.SIGNALS,...e].map(Jo)};fe.getSignals=Zo;var Jo=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){let{signals:{[e]:s}}=zo.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}}});var zn=p(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.signalsByNumber=B.signalsByName=void 0;var ei=require("os"),Vn=Wn(),ti=Ye(),ni=function(){return(0,Vn.getSignals)().reduce(ri,{})},ri=function(e,{name:t,number:r,description:n,supported:o,action:i,forced:s,standard:a}){return{...e,[t]:{name:t,number:r,description:n,supported:o,action:i,forced:s,standard:a}}},oi=ni();B.signalsByName=oi;var ii=function(){let e=(0,Vn.getSignals)(),t=ti.SIGRTMAX+1,r=Array.from({length:t},(n,o)=>si(o,e));return Object.assign({},...r)},si=function(e,t){let r=ai(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},ai=function(e,t){let r=t.find(({name:n})=>ei.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},ci=ii();B.signalsByNumber=ci});var Yn=p((Pa,Qn)=>{"use strict";var{signalsByName:ui}=zn(),di=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:i!==void 0?`failed with exit code ${i}`:"failed",li=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:s,escapedCommand:a,timedOut:c,isCanceled:d,killed:f,parsed:{options:{timeout:x}}})=>{i=i===null?void 0:i,o=o===null?void 0:o;let g=o===void 0?void 0:ui[o].description,h=n&&n.code,S=`Command ${di({timedOut:c,timeout:x,errorCode:h,signal:o,signalDescription:g,exitCode:i,isCanceled:d})}: ${s}`,w=Object.prototype.toString.call(n)==="[object Error]",E=w?`${S}
${n.message}`:S,A=[E,t,e].filter(Boolean).join(`
`);return w?(n.originalMessage=n.message,n.message=A):n=new Error(A),n.shortMessage=E,n.command=s,n.escapedCommand=a,n.exitCode=i,n.signal=o,n.signalDescription=g,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=d,n.killed=f&&!c,n};Qn.exports=li});var Jn=p((Ea,Ze)=>{"use strict";var me=["stdin","stdout","stderr"],pi=e=>me.some(t=>e[t]!==void 0),Zn=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return me.map(n=>e[n]);if(pi(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${me.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,me.length);return Array.from({length:r},(n,o)=>t[o])};Ze.exports=Zn;Ze.exports.node=e=>{let t=Zn(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var tr=p((Aa,er)=>{"use strict";var fi=require("os"),mi=Le(),gi=1e3*5,hi=(e,t="SIGTERM",r={})=>{let n=e(t);return Si(e,t,r,n),n},Si=(e,t,r,n)=>{if(!yi(t,r,n))return;let o=bi(r),i=setTimeout(()=>{e("SIGKILL")},o);i.unref&&i.unref()},yi=(e,{forceKillAfterTimeout:t},r)=>xi(e)&&t!==!1&&r,xi=e=>e===fi.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",bi=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return gi;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},wi=(e,t)=>{e.kill()&&(t.isCanceled=!0)},vi=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Ii=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let o,i=new Promise((a,c)=>{o=setTimeout(()=>{vi(e,r,c)},t)}),s=n.finally(()=>{clearTimeout(o)});return Promise.race([i,s])},Pi=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Ei=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let o=mi(()=>{e.kill()});return n.finally(()=>{o()})};er.exports={spawnedKill:hi,spawnedCancel:wi,setupTimeout:Ii,validateTimeout:Pi,setExitHandler:Ei}});var rr=p((Ta,nr)=>{"use strict";var P=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";P.writable=e=>P(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";P.readable=e=>P(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";P.duplex=e=>P.writable(e)&&P.readable(e);P.transform=e=>P.duplex(e)&&typeof e._transform=="function";nr.exports=P});var ar=p((Ca,sr)=>{"use strict";var ir=rr(),or=Be(),Ai=Fe(),Ti=(e,t)=>{t===void 0||e.stdin===void 0||(ir(t)?t.pipe(e.stdin):e.stdin.end(t))},Ci=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=Ai();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},Je=async(e,t)=>{if(e){e.destroy();try{return await t}catch(r){return r.bufferedData}}},et=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?or(e,{encoding:t,maxBuffer:n}):or.buffer(e,{maxBuffer:n})},Oi=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},s)=>{let a=et(e,{encoding:n,buffer:o,maxBuffer:i}),c=et(t,{encoding:n,buffer:o,maxBuffer:i}),d=et(r,{encoding:n,buffer:o,maxBuffer:i*2});try{return await Promise.all([s,a,c,d])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},Je(e,a),Je(t,c),Je(r,d)])}},Gi=({input:e})=>{if(ir(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};sr.exports={handleInput:Ti,makeAllStream:Ci,getSpawnedResult:Oi,validateInputSync:Gi}});var ur=p((Oa,cr)=>{"use strict";var Ri=(async()=>{})().constructor.prototype,Di=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Ri,e)]),ki=(e,t)=>{for(let[r,n]of Di){let o=typeof t=="function"?(...i)=>Reflect.apply(n.value,t(),i):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},Ni=e=>new Promise((t,r)=>{e.on("exit",(n,o)=>{t({exitCode:n,signal:o})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});cr.exports={mergePromise:ki,getSpawnedPromise:Ni}});var pr=p((Ga,lr)=>{"use strict";var dr=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],$i=/^[\w.-]+$/,Li=/"/g,ji=e=>typeof e!="string"||$i.test(e)?e:`"${e.replace(Li,'\\"')}"`,Bi=(e,t)=>dr(e,t).join(" "),Fi=(e,t)=>dr(e,t).map(r=>ji(r)).join(" "),qi=/ +/g,Ui=e=>{let t=[];for(let r of e.trim().split(qi)){let n=t[t.length-1];n&&n.endsWith("\\")?t[t.length-1]=`${n.slice(0,-1)} ${r}`:t.push(r)}return t};lr.exports={joinCommand:Bi,getEscapedCommand:Fi,parseCommand:Ui}});var xr=p((Ra,F)=>{"use strict";var Mi=require("path"),tt=require("child_process"),_i=Ce(),Hi=Ln(),Ki=Fn(),Xi=_n(),ge=Yn(),mr=Jn(),{spawnedKill:Wi,spawnedCancel:Vi,setupTimeout:zi,validateTimeout:Qi,setExitHandler:Yi}=tr(),{handleInput:Zi,getSpawnedResult:Ji,makeAllStream:es,validateInputSync:ts}=ar(),{mergePromise:fr,getSpawnedPromise:ns}=ur(),{joinCommand:gr,parseCommand:hr,getEscapedCommand:Sr}=pr(),rs=1e3*1e3*100,os=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{let i=t?{...process.env,...e}:e;return r?Ki.env({env:i,cwd:n,execPath:o}):i},yr=(e,t,r={})=>{let n=_i._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:rs,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=os(r),r.stdio=mr(r),process.platform==="win32"&&Mi.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},Y=(e,t,r)=>typeof t!="string"&&!Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?Hi(t):t,he=(e,t,r)=>{let n=yr(e,t,r),o=gr(e,t),i=Sr(e,t);Qi(n.options);let s;try{s=tt.spawn(n.file,n.args,n.options)}catch(h){let l=new tt.ChildProcess,S=Promise.reject(ge({error:h,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return fr(l,S)}let a=ns(s),c=zi(s,n.options,a),d=Yi(s,n.options,c),f={isCanceled:!1};s.kill=Wi.bind(null,s.kill.bind(s)),s.cancel=Vi.bind(null,s,f);let g=Xi(async()=>{let[{error:h,exitCode:l,signal:S,timedOut:w},E,A,Se]=await Ji(s,n.options,d),U=Y(n.options,E),M=Y(n.options,A),_=Y(n.options,Se);if(h||l!==0||S!==null){let H=ge({error:h,exitCode:l,signal:S,stdout:U,stderr:M,all:_,command:o,escapedCommand:i,parsed:n,timedOut:w,isCanceled:f.isCanceled,killed:s.killed});if(!n.options.reject)return H;throw H}return{command:o,escapedCommand:i,exitCode:0,stdout:U,stderr:M,all:_,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Zi(s,n.options.input),s.all=es(s,n.options),fr(s,g)};F.exports=he;F.exports.sync=(e,t,r)=>{let n=yr(e,t,r),o=gr(e,t),i=Sr(e,t);ts(n.options);let s;try{s=tt.spawnSync(n.file,n.args,n.options)}catch(d){throw ge({error:d,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=Y(n.options,s.stdout,s.error),c=Y(n.options,s.stderr,s.error);if(s.error||s.status!==0||s.signal!==null){let d=ge({stdout:a,stderr:c,error:s.error,signal:s.signal,exitCode:s.status,command:o,escapedCommand:i,parsed:n,timedOut:s.error&&s.error.code==="ETIMEDOUT",isCanceled:!1,killed:s.signal!==null});if(!n.options.reject)return d;throw d}return{command:o,escapedCommand:i,exitCode:0,stdout:a,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};F.exports.command=(e,t)=>{let[r,...n]=hr(e);return he(r,n,t)};F.exports.commandSync=(e,t)=>{let[r,...n]=hr(e);return he.sync(r,n,t)};F.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(r=t,t=[]);let n=mr.node(r),o=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:i=process.execPath,nodeOptions:s=o}=r;return he(i,[...s,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var us={};Rr(us,{default:()=>Pr});module.exports=Dr(us);var u=require("@raycast/api"),q=require("react");var Xe=b(require("path"));var En=require("node:buffer"),An=b(require("node:path"),1),Ke=b(require("node:child_process"),1),V=b(require("node:process"),1),Tn=b(Ce(),1);function Oe(e){let t=typeof e=="string"?`
`:`
`.charCodeAt(),r=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var K=b(require("node:process"),1),k=b(require("node:path"),1),_t=b(require("node:url"),1);function ee(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function io(e={}){let{cwd:t=K.default.cwd(),path:r=K.default.env[ee()],execPath:n=K.default.execPath}=e,o,i=t instanceof URL?_t.default.fileURLToPath(t):t,s=k.default.resolve(i),a=[];for(;o!==s;)a.push(k.default.join(s,"node_modules/.bin")),o=s,s=k.default.resolve(s,"..");return a.push(k.default.resolve(i,n,"..")),[...a,r].join(k.default.delimiter)}function Ht({env:e=K.default.env,...t}={}){e={...e};let r=ee({env:e});return t.path=e[r],e[r]=io(t),e}var so=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let o=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!ao(o,i)&&n||Object.defineProperty(e,r,i)},ao=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},co=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},uo=(e,t)=>`/* Wrapped ${e}*/
${t}`,lo=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),po=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),fo=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,o=uo.bind(null,n,t.toString());Object.defineProperty(o,"name",po),Object.defineProperty(e,"toString",{...lo,value:o})};function Ge(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let o of Reflect.ownKeys(t))so(e,t,o,r);return co(e,t),fo(e,t,n),e}var te=new WeakMap,Kt=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,o=e.displayName||e.name||"<anonymous>",i=function(...s){if(te.set(i,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return Ge(i,e),te.set(i,n),i};Kt.callCount=e=>{if(!te.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return te.get(e)};var Xt=Kt;var Yt=require("os");var Wt=function(){let e=Re-Vt+1;return Array.from({length:e},mo)},mo=function(e,t){return{name:`SIGRT${t+1}`,number:Vt+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Vt=34,Re=64;var Qt=require("os");var zt=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var De=function(){let e=Wt();return[...zt,...e].map(go)},go=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){let{signals:{[e]:s}}=Qt.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}};var ho=function(){return De().reduce(So,{})},So=function(e,{name:t,number:r,description:n,supported:o,action:i,forced:s,standard:a}){return{...e,[t]:{name:t,number:r,description:n,supported:o,action:i,forced:s,standard:a}}},Zt=ho(),yo=function(){let e=De(),t=64+1,r=Array.from({length:t},(n,o)=>xo(o,e));return Object.assign({},...r)},xo=function(e,t){let r=bo(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},bo=function(e,t){let r=t.find(({name:n})=>Yt.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},Fs=yo();var wo=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:i!==void 0?`failed with exit code ${i}`:"failed",ke=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:s,escapedCommand:a,timedOut:c,isCanceled:d,killed:f,parsed:{options:{timeout:x}}})=>{i=i===null?void 0:i,o=o===null?void 0:o;let g=o===void 0?void 0:Zt[o].description,h=n&&n.code,S=`Command ${wo({timedOut:c,timeout:x,errorCode:h,signal:o,signalDescription:g,exitCode:i,isCanceled:d})}: ${s}`,w=Object.prototype.toString.call(n)==="[object Error]",E=w?`${S}
${n.message}`:S,A=[E,t,e].filter(Boolean).join(`
`);return w?(n.originalMessage=n.message,n.message=A):n=new Error(A),n.shortMessage=E,n.command=s,n.escapedCommand=a,n.exitCode=i,n.signal=o,n.signalDescription=g,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=d,n.killed=f&&!c,n};var ne=["stdin","stdout","stderr"],vo=e=>ne.some(t=>e[t]!==void 0),Jt=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return ne.map(n=>e[n]);if(vo(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${ne.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,ne.length);return Array.from({length:r},(n,o)=>t[o])};var sn=b(require("node:os"),1),an=b(Le(),1),Io=1e3*5,cn=(e,t="SIGTERM",r={})=>{let n=e(t);return Po(e,t,r,n),n},Po=(e,t,r,n)=>{if(!Eo(t,r,n))return;let o=To(r),i=setTimeout(()=>{e("SIGKILL")},o);i.unref&&i.unref()},Eo=(e,{forceKillAfterTimeout:t},r)=>Ao(e)&&t!==!1&&r,Ao=e=>e===sn.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",To=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Io;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},un=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Co=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},dn=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let o,i=new Promise((a,c)=>{o=setTimeout(()=>{Co(e,r,c)},t)}),s=n.finally(()=>{clearTimeout(o)});return Promise.race([i,s])},ln=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},pn=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let o=(0,an.default)(()=>{e.kill()});return n.finally(()=>{o()})};function fn(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var Me=b(Be(),1),Sn=b(Fe(),1),yn=(e,t)=>{t===void 0||e.stdin===void 0||(fn(t)?t.pipe(e.stdin):e.stdin.end(t))},xn=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,Sn.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},qe=async(e,t)=>{if(e){e.destroy();try{return await t}catch(r){return r.bufferedData}}},Ue=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?(0,Me.default)(e,{encoding:t,maxBuffer:n}):Me.default.buffer(e,{maxBuffer:n})},bn=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},s)=>{let a=Ue(e,{encoding:n,buffer:o,maxBuffer:i}),c=Ue(t,{encoding:n,buffer:o,maxBuffer:i}),d=Ue(r,{encoding:n,buffer:o,maxBuffer:i*2});try{return await Promise.all([s,a,c,d])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},qe(e,a),qe(t,c),qe(r,d)])}};var Lo=(async()=>{})().constructor.prototype,jo=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Lo,e)]),_e=(e,t)=>{for(let[r,n]of jo){let o=typeof t=="function"?(...i)=>Reflect.apply(n.value,t(),i):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},wn=e=>new Promise((t,r)=>{e.on("exit",(n,o)=>{t({exitCode:n,signal:o})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});var vn=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Bo=/^[\w.-]+$/,Fo=/"/g,qo=e=>typeof e!="string"||Bo.test(e)?e:`"${e.replace(Fo,'\\"')}"`,In=(e,t)=>vn(e,t).join(" "),Pn=(e,t)=>vn(e,t).map(r=>qo(r)).join(" ");var Uo=1e3*1e3*100,Mo=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{let i=t?{...V.default.env,...e}:e;return r?Ht({env:i,cwd:n,execPath:o}):i},_o=(e,t,r={})=>{let n=Tn.default._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:Uo,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||V.default.cwd(),execPath:V.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=Mo(r),r.stdio=Jt(r),V.default.platform==="win32"&&An.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},He=(e,t,r)=>typeof t!="string"&&!En.Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?Oe(t):t;function v(e,t,r){let n=_o(e,t,r),o=In(e,t),i=Pn(e,t);ln(n.options);let s;try{s=Ke.default.spawn(n.file,n.args,n.options)}catch(h){let l=new Ke.default.ChildProcess,S=Promise.reject(ke({error:h,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return _e(l,S)}let a=wn(s),c=dn(s,n.options,a),d=pn(s,n.options,c),f={isCanceled:!1};s.kill=cn.bind(null,s.kill.bind(s)),s.cancel=un.bind(null,s,f);let g=Xt(async()=>{let[{error:h,exitCode:l,signal:S,timedOut:w},E,A,Se]=await bn(s,n.options,d),U=He(n.options,E),M=He(n.options,A),_=He(n.options,Se);if(h||l!==0||S!==null){let H=ke({error:h,exitCode:l,signal:S,stdout:U,stderr:M,all:_,command:o,escapedCommand:i,parsed:n,timedOut:w,isCanceled:f.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return H;throw H}return{command:o,escapedCommand:i,exitCode:0,stdout:U,stderr:M,all:_,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return yn(s,n.options.input),s.all=xn(s,n.options),_e(s,g)}var We=require("@raycast/api"),Cn=b(require("fs")),Ve=(l=>(l.Avb="avb",l.Aggregate="aggregate",l.Airplay="airplay",l.Autoaggregate="autoaggregate",l.Bluetooth="bluetooth",l.BluetoothLowEnergy="bluetoothle",l["Built-In"]="builtin",l.DisplayPort="displayport",l.Firewire="firewire",l.HDMI="hdmi",l.PCI="pci",l.Thunderbolt="thunderbolt",l.Usb="usb",l.Virtual="virtual",l.Unknown="unknown",l))(Ve||{}),Ho=Xe.default.join(We.environment.assetsPath,"audio-devices"),I=Xe.default.join(We.environment.supportPath,"audio-devices");async function G(){Cn.default.existsSync(I)||(await v("cp",[Ho,I]),await v("chmod",["+x",I]))}function ce({stderr:e}){if(e)throw new Error(e)}function ue({stdout:e,stderr:t}){return ce({stderr:t}),JSON.parse(e)}async function On(){return await G(),ue(await v(I,["list","--input","--json"]))}async function Gn(){return await G(),ue(await v(I,["list","--output","--json"]))}async function Rn(){return await G(),ue(await v(I,["output","get","--json"]))}async function Dn(){return await G(),ue(await v(I,["input","get","--json"]))}async function kn(e){return await G(),ce(await v(I,["output","set",e]))}async function ze(e){return await G(),ce(await v(I,["input","set",e]))}async function Nn(e){return await G(),ce(await v(I,["system","set",e]))}var br=require("@raycast/api");var is=b(xr(),1);var wr=function(e,t){let n=`${br.environment.raycastVersion.includes("alpha")?"raycastinternal://":"raycast://"}extensions/benvp/audio-device/${e}`;if(t){let o=encodeURIComponent(JSON.stringify(t));return`${n}?context=${o}`}return n};var T=require("react/jsx-runtime");function ss(e){let[t,r]=(0,q.useState)(!0),[n,o]=(0,q.useState)();return(0,q.useEffect)(()=>{(async()=>{let s=await(e==="input"?On():Gn()),a=await(e==="input"?Dn():Rn());return{devices:s,current:a}})().then(o).catch(s=>(0,u.showToast)(u.Toast.Style.Failure,"There was an error fetching the audio devices.",s.message)).finally(()=>r(!1))},[e]),{isLoading:t,data:n}}function vr({type:e,deviceId:t}){let{isLoading:r,data:n}=ss(e),o=i=>Object.entries(Ve).find(([,s])=>s===i.transportType)?.[0];return(0,q.useEffect)(()=>{if(!t||!n?.devices)return;let i=n.devices.find(s=>s.id===t);if(!i){(0,u.showToast)(u.Toast.Style.Failure,"Error!",`The device with id ${t} was not found.`);return}(async function(){try{await(e==="input"?ze(i.id):Ir(i.id)),(0,u.closeMainWindow)({clearRootSearch:!0}),(0,u.popToRoot)({clearSearchBar:!0}),(0,u.showHUD)(`Active ${e} audio device set to ${i.name}`)}catch(s){console.log(s),(0,u.showToast)(u.Toast.Style.Failure,"Error!",`There was an error setting the active ${e} audio device to ${i.name}`)}})()},[t,n,e]),(0,T.jsx)(u.List,{isLoading:r,children:n&&n.devices.map(i=>(0,T.jsx)(u.List.Item,{title:i.name,subtitle:o(i),icon:cs(i),actions:(0,T.jsxs)(u.ActionPanel,{children:[(0,T.jsx)(as,{device:i,type:e}),(0,T.jsx)(u.Action.CreateQuicklink,{title:"Create quicklink",quicklink:{name:`Set ${i.isOutput?"Output":"Input"} Device to ${i.name}`,link:wr(i.isOutput?"set-output-device":"set-input-device",{deviceId:i.id})}}),(0,T.jsx)(u.Action,{title:"Copy Device Name to Clipboard",onAction:async()=>{await u.Clipboard.copy(i.name),await(0,u.showToast)({style:u.Toast.Style.Success,title:"Device name copied to the clipboard"})}})]}),accessories:[{icon:i.uid===n.current.uid?u.Icon.Checkmark:void 0}]},i.uid))})}function as({device:e,type:t}){return(0,T.jsx)(u.Action,{title:`Select ${e.name}`,onAction:async()=>{try{await(t==="input"?ze(e.id):Ir(e.id)),(0,u.closeMainWindow)({clearRootSearch:!0}),(0,u.popToRoot)({clearSearchBar:!0}),(0,u.showHUD)(`Active ${t} audio device set to ${e.name}`)}catch(r){console.log(r),(0,u.showToast)(u.Toast.Style.Failure,"Error!",`There was an error setting the active ${t} audio device to ${e.name}`)}}})}async function Ir(e){let{systemOutput:t}=(0,u.getPreferenceValues)();await kn(e),t&&await Nn(e)}function cs(e){return{source:e.isInput?"mic.png":"speaker.png",tintColor:u.Color.SecondaryText}}var Er=require("react/jsx-runtime");function Pr({launchContext:e}){return(0,Er.jsx)(vr,{type:"input",deviceId:e?.deviceId})}
