"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{4741:(e,t,a)=>{a.d(t,{J:()=>i});var n=a(67281),r=a(42344);const c=new n.l("getTrack","query","ae85b52abb74d20a4c331d4143d4772c95f34757bfa8c625474b912b9055b5c0",null),i=(e,t)=>(0,r.I)(c,e,t)},77946:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(30758),r=a(41978),c=a(33165),i=a(96839),o=a(8539),s=a(57528),d=a(4741),l=a(68688),u=a(42344),f=a(53465),k=a(76875),b=a(86070);const g=n.memo((function(){const e=(0,c.Zp)(),t=(0,c.zy)(),a=(0,n.useContext)(k.w),g=(0,f.K)(),{trackId:p=""}=(0,c.g)(),{isAnonymous:h}=(0,r.d4)(l.Ht),m=(0,n.useMemo)((()=>new URLSearchParams(t.search)),[t.search]),y=m.get("context")||"",U=(0,i.tR)(p).toURI(),w=(0,d.J)({uri:U},{gcTime:30*u.i}),x=(0,n.useCallback)(((t,a)=>{const n=g.getState(),r=(0,i.o_)(a)?.toURLPath(!0);m.delete("context");const c=m.toString()?`&${m.toString()}`:"",o=`${r}?highlight=${U}${c}`;h?e(o):(n&&!n.isPaused||t>-1&&g.play({uri:a},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:t}}),e(o,{replace:!0}))}),[e,h,g,U,m]),I=(0,n.useCallback)((()=>{if(!w.loading&&w.data?.trackUnion&&"Track"===w.data.trackUnion.__typename){const e=(w.data.trackUnion.albumOfTrack?.tracks?.items??[]).findIndex((e=>e.track.uri===U));e>=0&&x(e,w.data.trackUnion.albumOfTrack?.uri||"")}}),[x,w,U]);return(0,n.useEffect)((()=>{const e=(0,i.tb)(y);y&&e?a.getContents(y).then((e=>{const t=e.items.findIndex((e=>e?.uri===U));t<0?I():x(t,y)})):I()}),[y,I,x,a,U]),w.loading||w.error||"Track"!==w.data?.trackUnion?.__typename?(0,b.jsx)(s.A,{hasError:!w.loading,errorMessage:o.Ru.get("track-page.error")}):null})),p=g}}]);
//# sourceMappingURL=xpui-routes-track.js.map