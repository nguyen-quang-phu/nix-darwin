"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3569],{61341:(e,n,a)=>{a.d(n,{e:()=>t});var i=a(26191);const r="k270skPbT7JOaSidSA2a";var s=a(86070);const t=({iconSize:e=64,...n})=>(0,s.jsx)("div",{className:r,children:(0,s.jsx)(i.E,{iconSize:e,...n,semanticColor:"textBrightAccent","aria-hidden":!0})})},16587:(e,n,a)=>{a.r(n),a.d(n,{default:()=>B});var i=a(97500),r=a.n(i),s=a(8539),t=a(90433),l=a(70494),u=a(85653),c=a(54168),o=a(56578),d=a(22058),m=a(5752),g=a(86070);function f(e,n){switch(e.type){case d.c.ALBUM:return(0,g.jsx)(t.a,{uri:e.uri,name:e.name,images:e.images,sharingInfo:null,artists:e.artists,index:n},e.uri);case d.c.ARTIST:return(0,g.jsx)(l.a,{uri:e.uri,name:e.name,images:e.images,index:n},e.uri);case d.c.SHOW:return(0,g.jsx)(o.o,{uri:e.uri,name:e.name,images:e.images,publisher:e.publisher,sharingInfo:null,mediaType:m.Q.UNKNOWN,index:n},e.uri);case d.c.AUDIOBOOK:return(0,g.jsx)(u.M,{uri:e.uri,name:e.name,images:e.images,authorName:e.authorName,index:n},e.uri);case d.c.PLAYLIST:return(0,g.jsx)(c.B,{uri:e.uri,name:e.name,images:e.images,description:"",authorName:e.creatorName,index:n},e.uri);default:return null}}var x=a(98802),h=a(30758),p=a(8159),b=a(80597),j=a(36146),y=a(87693),S=a(61341),w=a(676),v=a(34606),I=a(83291),k=a(21280),P=a(73791),A=a(1058),C=a(60093),E=a(50082);const N=function({uri:e,name:n,images:a,index:i}){const r=(0,A.o)(),t=(0,h.useRef)(null),l=(0,h.useRef)(!0),u=(0,h.useContext)(k._),{isPlaying:c}=(0,E.l_)(I.bV),{togglePlay:o}=(0,C.P)({uri:I.bV,pages:[{items:t.current?.map((e=>({...e,provider:null})))||[]}]},{featureIdentifier:"local_files"});(0,h.useEffect)((()=>(l.current=!0,()=>{l.current=!1})),[]);const d=(0,P.P)(),m=(0,p.YQ)((async(e,n)=>{if(!t.current){const e=await u.getTracks();t.current=e}l&&o({loggingParams:n},{uri:I.bV,pages:[{items:t.current?.map((e=>({...e,provider:null})))||[]}]})}),v.d,{leading:!0,trailing:!1});return r.canFetchAllTracks&&d?(0,g.jsx)(b.Z,{index:i,delegatePlayback:!0,delegateLogging:!0,isPlaying:c,onPlay:m,headerText:n,featureIdentifier:"local_files",uri:e,renderCardImage:()=>(0,g.jsx)(j.M,{images:a,FallbackComponent:S.e}),renderSubHeaderContent:()=>(0,g.jsx)(y.c,{children:s.Ru.get("local-files.description")})}):null},T=({index:e})=>{const n=(0,w.Iu)();return(0,g.jsx)(h.Suspense,{fallback:null,children:(0,g.jsx)(N,{index:e,name:n.name,uri:n.uri,images:n.images})})};var _=a(59471),O=a(93697),R=a(67447);var L=a(87051);const B=function(){const{hasError:e,items:n}=function(){const e=(0,R.Q)(),[n,a]=(0,h.useState)(!0),[i,r]=(0,h.useState)(!1),[s,t]=(0,h.useState)([]);return(0,h.useEffect)((()=>{(async()=>{try{const n=await e.getDownloads();t(n)}catch(e){r(!0)}finally{a(!1)}})()}),[e]),{isLoading:n,hasError:i,items:s}}(),a=(0,P.P)();return e?null:(0,g.jsx)("div",{className:r()(L.A.offline,"contentSpacing"),children:n.length>0||a?(0,g.jsxs)(O.pZ,{value:"headered-grid",children:[(0,g.jsx)(x.$,{title:s.Ru.get("music_downloads"),total:n.length,seeAllUri:"/collection/music-downloads",alwaysShowSeeAll:!0,children:n.map(((e,n)=>(0,g.jsx)(O.pZ,{value:"card",index:n,children:f(e,n)},e.uri)))}),a&&(0,g.jsx)(x.$,{title:s.Ru.get("local-files"),total:1,showAll:!0,children:(0,g.jsx)(T,{index:0})})]}):(0,g.jsx)(_.I,{showDownloadInformation:!0})})}},73791:(e,n,a)=>{a.d(n,{P:()=>r});var i=a(5298);function r(){return(0,i.y)()[0]}},5298:(e,n,a)=>{a.d(n,{y:()=>s});var i=a(30758),r=a(21280);function s(){const e=(0,i.useContext)(r._),[n,a]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const n=e.subscribeIsEnabled(a);return()=>n()}),[e]);return[n,(0,i.useCallback)((n=>e.setIsEnabled(n)),[e])]}}}]);
//# sourceMappingURL=xpui-routes-offline-browse.js.map