"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4389],{75592:(e,t,r)=>{r.d(t,{d:()=>T});var l=r(30758),s=r(8539),i=r(43219),a=r(4414),n=r(30051),o=r(94541);const c={"custom-order":n.RB,"title-and-artist-title":{column:o.$.TITLE_AND_ARTIST,order:o.H.ASC},"title-and-artist-artist":{column:o.$.TITLE_AND_ARTIST,order:o.H.SECONDARY_ASC},title:{column:o.$.TITLE,order:o.H.ASC},artist:{column:o.$.ARTIST,order:o.H.ASC},"added-by":{column:o.$.ADDED_BY,order:o.H.ASC},"added-at":{column:o.$.ADDED_AT,order:o.H.ASC},duration:{column:o.$.DURATION,order:o.H.ASC},album:{column:o.$.ALBUM,order:o.H.ASC},"album-or-podcast":{column:o.$.ALBUM_OR_PODCAST,order:o.H.ASC},"album-or-show":{column:o.$.ALBUM_OR_SHOW,order:o.H.ASC}},u={"title-and-artist-title":o.$.TITLE_AND_ARTIST,"title-and-artist-artist":o.$.TITLE_AND_ARTIST,title:o.$.TITLE,artist:o.$.ARTIST,"added-by":o.$.ADDED_BY,"added-at":o.$.ADDED_AT,duration:o.$.DURATION,album:o.$.ALBUM,"album-or-podcast":o.$.ALBUM_OR_PODCAST,"album-or-show":o.$.ALBUM_OR_SHOW},d={[o.H.NONE]:o.H.NONE,[o.H.ASC]:o.H.DESC,[o.H.DESC]:o.H.ASC,[o.H.SECONDARY_ASC]:o.H.SECONDARY_DESC,[o.H.SECONDARY_DESC]:o.H.SECONDARY_ASC},m=(o.$.INDEX,{[o.$.INDEX]:{key:"custom-order",get value(){return s.Ru.get("sort.custom-order")}},[o.$.TITLE_AND_ARTIST]:{key:"title",get value(){return s.Ru.get("sort.title")}},[o.$.TITLE]:{key:"title",get value(){return s.Ru.get("sort.title")}},[o.$.ARTIST]:{key:"artist",get value(){return s.Ru.get("sort.artist")}},[o.$.ADDED_BY]:{key:"added-by",get value(){return s.Ru.get("sort.added-by")}},[o.$.ADDED_AT]:{key:"added-at",get value(){return s.Ru.get("sort.date-added")}},[o.$.DURATION]:{key:"duration",get value(){return s.Ru.get("sort.duration")}},[o.$.EVENT_DATE]:null,[o.$.EVENT_INFO]:null,[o.$.ALBUM]:{key:"album",get value(){return s.Ru.get("sort.album")}},[o.$.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return s.Ru.get("sort.album-or-podcast")}},[o.$.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return s.Ru.get("sort.album-or-show")}},[o.$.PLAYS]:null,[o.$.RELEASE_DATE]:null,[o.$.ADD]:null,[o.$.ACTIONS]:null,[o.$.CONCERT_VENUE]:null,[o.$.CONCERT_DATE]:null,[o.$.TITLE_AND_AUTHOR]:{key:"title",get value(){return s.Ru.get("sort.title")}},[o.$.AUTHOR]:null});var x=r(86070);function g(e){return!!e}const T=({columns:e,disabled:t,onSort:r})=>{const T=[...e],A=T.indexOf(o.$.TITLE_AND_ARTIST),p=T.indexOf(o.$.TITLE_AND_AUTHOR);-1!==A&&T.splice(A,1,o.$.TITLE,o.$.ARTIST),-1!==p&&T.splice(p,1);const{sortState:y,setSortState:C}=(0,l.useContext)(n.cL),R=function(e){return null===e.column?m[o.$.INDEX]:(0,i.kj)(e.column,e)?m[o.$.ARTIST]:m[e.column]}(y),h=(0,l.useCallback)((e=>{r?.(),C(((e,t,r)=>e?t!==u[e]?c[e]:{column:u[e],order:d[r]}:n.RB)(e,y.column,y.order))}),[r,C,y.column,y.order]),S=(0,l.useCallback)((()=>null!==y.column),[y.column]),I=T.map((e=>m[e])).filter(g);return(0,x.jsx)(a.g,{options:I,onSelect:h,selected:R,isSelectionChanged:S,sortOrder:y.order,heading:s.Ru.get("drop_down.sort_by"),disabled:t,enableViewModeMenu:!0})}},48847:(e,t,r)=>{r.r(t),r.d(t,{default:()=>be});var l=r(30758),s=r(58634),i=r(24089),a=r(79621),n=r(42236),o=r(19268),c=r(8539),u=r(24942),d=r(21792),m=r(18520),x=r(66932),g=r(64741),T=r(79851),A=r(74460),p=r(57528),y=r(83834),C=r(43219),R=r(35242),h=r(30051),S=r(83875),I=r(94541),b=r(10139),j=r(93655),E=r(67161),D=r(89457),f=r(75592),$=r(93302),_=r(58400);const k="ijkY1leciNts_lZ000bI",N="nyi5paBf0kJsz7Py0DaI";var P=r(86070);const v=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:r}=(0,_.r)(E.E,{}),s=(0,l.useCallback)((()=>{r.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[r,t]),i=(0,l.useCallback)((()=>{r.logInteraction(t.filterFieldFactory().hitClearFilter())}),[r,t]),a=(0,$.w)().filter((({columnType:e})=>h.ws.includes(e))).map((({columnType:e})=>e));return(0,P.jsxs)("div",{className:N,children:[(0,P.jsx)(l.Suspense,{fallback:null,children:(0,P.jsx)(D.S,{placeholder:c.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:s,onClear:i})}),(0,P.jsx)(f.d,{columns:a})]})}));var O=r(79278),L=r(44690),M=r(44671),H=r(23572),U=r(83291),w=r(10644);const B=l.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:r,isActive:s,backgroundColor:i,spec:a,logger:n}){const o=(0,L.X)(),u=(0,l.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),d=(0,M.j)(),m=(0,l.useCallback)((()=>{const e=(0,H.$I)({isPlaying:r,isActive:s,spec:a.playButtonFactory(),logger:n,uri:U.bV});t({loggingParams:e})}),[s,r,n,a,t]);return(0,P.jsx)(b.E,{backgroundColor:i,children:(0,P.jsxs)(j.S,{children:[(0,P.jsx)(y.D,{size:d,onClick:m,isPlaying:r,uri:U.bV}),o&&(0,P.jsx)(w.r,{spec:u,children:(0,P.jsx)(O.Y,{entityName:c.Ru.get("local-files"),contextUri:U.bV,activationPlacement:"bottomEnd",size:d})}),(0,P.jsx)(w.r,{spec:a,children:(0,P.jsx)(v,{tracklistDomRef:e})})]})})}));var F=r(89220),Y=r(87349),V=r(15609),X=r(72368),z=r(22239),W=r(6748),Z=r(64436),q=r(14936),K=r(1479),J=r(72786),Q=r(57412),G=r(38680),ee=r(13148),te=r(59960),re=r(93412),le=r(13012),se=r(29794),ie=r(54847),ae=r(12071),ne=r(96915),oe=r(52756),ce=r(93697),ue=r(54229);const de=l.memo((function({uri:e,uid:t,name:r,duration_ms:s,artists:i,album:a,is19PlusOnly:n,isExplicit:o,isPlayable:u,index:d,contextUri:m,imgUrl:x,usePlayContextItem:g,isCompactMode:T=!1}){const{spec:A}=(0,_.r)(F.i,{data:{position:d,reason:"",uri:e}}),{filter:p}=(0,l.useContext)(R.g),{isActive:y,isPlaying:C,triggerPlay:h,togglePlay:S}=g({uid:t,uri:e,index:d}),{badges:b,hasBadges:j}=(0,ue.b)({isExplicit:o}),E=i?.map((e=>e.name)).join(c.Ru.getSeparator())||"",D=(0,$.w)();return(0,P.jsx)(ce.pZ,{value:"row",index:d,children:(0,P.jsx)(Y.h,{menu:(0,P.jsx)(V.A,{uri:e,uid:t,contextUri:m}),children:(0,P.jsx)(ie.w,{uri:e,contextUri:m,isActive:y,index:d,onTriggerPlay:(e,t)=>{h({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:n,dragMetadata:{name:r,createdBy:E},spec:A,isCompactMode:T,children:D.map((({columnType:l,options:n},o)=>{const u=(0,ae.y)(o,l,D);switch(l){case I.$.INDEX:return(0,P.jsx)(u,{ariaColIndex:o,children:(0,P.jsx)(G.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,E),isPlaying:C,isActive:y,onClick:(e,t)=>{S({loggingParams:t})},spec:A,children:(0,P.jsx)(te.a,{children:d+1})})},o);case I.$.TITLE_AND_ARTIST:return(0,P.jsxs)(u,{ariaColIndex:o,children:[(0,P.jsx)(K.e,{src:x}),(0,P.jsxs)(J.l,{children:[(0,P.jsx)(se.p,{titleText:r,children:(0,P.jsx)(X.M,{searchWords:[p],textToHighlight:r})}),j&&(0,P.jsx)(Z.P,{children:b.explicit?(0,P.jsx)(oe.g,{}):null}),(0,P.jsx)(re.p,{children:i&&(0,P.jsx)(z.E,{nonInteractive:!0,artists:i,filter:p})})]})]},o);case I.$.TITLE:return(0,P.jsx)(u,{ariaColIndex:o,children:(0,P.jsxs)(Q.q,{children:[(0,P.jsx)(se.p,{titleText:r,children:(0,P.jsx)(X.M,{searchWords:[p],textToHighlight:r})}),j&&(0,P.jsx)(Z.P,{children:b.explicit?(0,P.jsx)(oe.g,{}):null})]})},o);case I.$.ARTIST:return(0,P.jsx)(u,{ariaColIndex:o,children:(0,P.jsx)(le.Y,{children:i&&(0,P.jsx)(z.E,{nonInteractive:!0,artists:i,filter:p})})},o);case I.$.ALBUM:return(0,P.jsx)(u,{ariaColIndex:o,children:a?.name&&(0,P.jsx)(W.g,{nonInteractive:!0,uri:a?.uri,name:a?.name,children:(0,P.jsx)(X.M,{searchWords:[p],textToHighlight:a?.name})})},o);case I.$.DURATION:return(0,P.jsxs)(u,{ariaColIndex:o,children:[(0,P.jsx)(ne.d,{uri:e}),!n?.hideDuration&&(0,P.jsx)(q.P,{duration:s}),(0,P.jsx)(ee.Y,{menu:(0,P.jsx)(V.A,{uri:e,uid:t,contextUri:m}),label:c.Ru.get("more.label.track",r,E),spec:A})]},o);default:return null}}))})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index&&e.isCompactMode===t.isCompactMode));var me=r(49294),xe=r(59943);const ge=new Set(h.ws),Te=l.memo((function({uri:e,tracks:t,sortState:r,handleSort:s,usePlayContextItem:i,tracklistDomRef:a,isCompactMode:n=!1}){const o=(0,$.w)(),u=(0,l.useRef)(null),d=(0,l.useCallback)(((t,r)=>{const l=(0,xe.g)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,P.jsx)(de,{index:r,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:l?.url||"",usePlayContextItem:i,isCompactMode:n},t.uid)}),[e,i,n]),m=(0,l.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(ce.pZ,{value:"playlist-tracklist",children:(0,P.jsx)(me.S4,{ariaLabel:c.Ru.get("local-files"),hasHeaderRow:!0,columns:o,sortableColumns:ge,sortState:r,onSort:s,renderRow:d,resolveItem:m,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:a,isCompactMode:n,columnPersistenceKey:"playlist-tracklist"},e)})})}));var Ae=r(85848),pe=r(96331),ye=r(21280),Ce=r(73791),Re=r(60093),he=r(79464);const Se=[I.$.INDEX,I.$.TITLE_AND_ARTIST,I.$.ALBUM,I.$.DURATION],Ie=()=>{const{filter:e}=(0,l.useContext)(R.g),{sortState:t,setSortState:r}=(0,l.useContext)(h.cL),b=(0,l.useContext)(ye._),j=(0,Ce.P)(),E=(0,pe.z)(a.Qmy),D=(0,l.useRef)(null),{spec:f}=(0,_.r)(o.Z,{data:{uri:U.bV}}),$=(0,l.useMemo)((()=>f.actionBarFactory()),[f]),N=(0,l.useMemo)((()=>f.tracklistFactory()),[f]),v=(0,he.s)(),{isCompactMode:O}=(0,Ae.a)(),L=(({isCompactMode:e=!1})=>{const t=[...Se];return e&&t.splice(t.indexOf(I.$.TITLE_AND_ARTIST),1,I.$.TITLE,I.$.ARTIST),t})({isCompactMode:O}),M=(0,l.useCallback)(((e,l)=>{r((0,C.So)(e,t)),v.logInteraction(f.tracklistFactory().columnHeaderFactory({identifier:e,position:l||0}).hitSort())}),[r,t,v,f]),{data:H}=(0,s.I)({queryKey:["local-files",t,e],queryFn:()=>b.getTracks((0,C.Xt)(t),e),staleTime:0,gcTime:3e5,placeholderData:i.rX,enabled:j}),{isActive:F,isPlaying:Y,togglePlay:V,usePlayContextItem:X}=(0,Re.P)({uri:U.bV,pages:[{items:(H??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return H?e||H.length&&j?(0,P.jsx)(S.a,{columns:L,children:(0,P.jsxs)("div",{role:"presentation",className:k,children:[(0,P.jsxs)(m.z,{backgroundColor:E,children:[(0,P.jsxs)(g.h,{children:[(0,P.jsx)(y.D,{size:"medium",onClick:()=>V(),isPlaying:Y,uri:U.bV}),(0,P.jsx)(T.X,{text:c.Ru.get("local-files")})]}),(0,P.jsxs)(x.Y,{children:[(0,P.jsx)(A.mm,{children:c.Ru.get("local-files")}),(0,P.jsx)(d.Z,{children:c.Ru.get("local-files.description")})]})]}),(0,P.jsx)(B,{togglePlay:V,isPlaying:Y,isActive:F,backgroundColor:E,tracklistDomRef:D,spec:$,logger:v}),(0,P.jsx)("div",{className:"contentSpacing",children:(0,P.jsx)(w.r,{spec:N,children:(0,P.jsx)(Te,{tracks:H,uri:U.bV,handleSort:M,sortState:t,usePlayContextItem:X,tracklistDomRef:D,isCompactMode:O})})})]})}):(0,P.jsx)(u.p,{linkTo:"/preferences",linkTitle:c.Ru.get("local-files.empty-button"),message:c.Ru.get("local-files.empty-description"),title:c.Ru.get("local-files.empty-header"),children:(0,P.jsx)(n.s,{size:"xxlarge","aria-hidden":"true"})}):(0,P.jsx)(p.A,{hasError:!1,errorMessage:c.Ru.get("error.request-artist-failure"),loadOffline:!0})},be=()=>(0,P.jsx)(h.sn,{uri:"spotify:internal:local-files",children:(0,P.jsx)(R.s,{uri:"spotify:internal:local-files",children:(0,P.jsx)(Ie,{})})})},73791:(e,t,r)=>{r.d(t,{P:()=>s});var l=r(5298);function s(){return(0,l.y)()[0]}},5298:(e,t,r)=>{r.d(t,{y:()=>i});var l=r(30758),s=r(21280);function i(){const e=(0,l.useContext)(s._),[t,r]=(0,l.useState)(e.getIsEnabled());(0,l.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,l.useCallback)((t=>e.setIsEnabled(t)),[e])]}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map